<div class="container" *ngIf="problem">
  <div class="problem-header">
    <div class="title-section">
      <h1>{{ problem.title }}</h1>
      <span class="difficulty-badge" [ngClass]="'difficulty-' + problem.difficultyLevel">
        {{ getDifficultyLabel(problem.difficultyLevel) }}
      </span>
    </div>
  </div>

  <div class="problem-content">
    <div class="problem-description">
      <h2>Problem Description</h2>
      <p>{{ problem.description }}</p>

      <div *ngIf="problem.constraints" class="constraints">
        <h3>Constraints</h3>
        <p>{{ problem.constraints }}</p>
      </div>

      <div class="test-cases">
        <h3>Test Cases</h3>
        <div class="test-case">
          <h4>Input:</h4>
          <pre>{{ problem.testCaseInput }}</pre>
          <h4>Expected Output:</h4>
          <pre>{{ problem.testCaseOutput }}</pre>
        </div>
      </div>
    </div>

    <div class="code-editor-section">
      <div class="editor-header">
        <h2>Solution</h2>
        <div class="editor-actions">
          <div class="language-selector">
            <label for="language">Programming Language</label>
            <select id="language" [(ngModel)]="selectedLanguage" (ngModelChange)="onLanguageChange()">
              <option *ngFor="let lang of languages" [value]="lang.value">
                {{ lang.viewValue }}
              </option>
            </select>
          </div>
        </div>
      </div>

      <div class="editor-container">
        <app-code-editor [(code)]="code" [language]="selectedLanguage"></app-code-editor>
      </div>

      <div class="submission-section">
        <button class="run-button" (click)="runCode()" [disabled]="isRunning">
          Run
        </button>
        <button class="submit-button" (click)="submitSolution()" [disabled]="isSubmitting">
          Submit Solution
        </button>
      </div>
    </div>
  </div>

  <div class="test-cases" *ngIf="result">
    <div class="test-case-header">
      <h3>Results</h3>
    </div>

    <div class="test-case-card" [ngClass]="{ success: result.success, error: !result.success }">
      <div class="test-case-status">
        <span>{{ result.success ? 'Success' : 'Failed' }}</span>
      </div>

      <div class="test-case-content">
        <div *ngIf="result.output" class="test-case-result">
          <strong>Output:</strong>
          <pre>{{ result.output }}</pre>
        </div>

        <div *ngIf="result.error" class="test-case-error">
          <strong>Error:</strong>
          <pre>{{ result.error }}</pre>
        </div>

        <div class="test-case-stats">
          <div *ngIf="result.executionTime !== undefined" class="test-case-stat">
            <span>Execution Time: {{ result.executionTime }} ms</span>
          </div>
          <div *ngIf="result.memoryUsage !== undefined" class="test-case-stat">
            <span>Memory Usage: {{ result.memoryUsage }} MB</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="loading-overlay" *ngIf="isLoading">
  <div class="loading-spinner"></div>
</div>